<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>è¥¿é¾œå•†åŸ ğŸ‰ğŸ¢</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #e0e0e0;
      color: #000;
    }

    h2 {
      color: #005ab5;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    .controls input[type="text"],
    .controls input[type="number"] {
      padding: 5px;
      max-width: 150px;
    }

    .controls button {
      background-color: #dddddd;
      color: #333;
      border: 1px solid #ccc;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }

    .controls button:hover {
      background-color: #cccccc;
    }

    .reset-btn {
      background-color: #cce5ff;
      color: #004085;
    }

    .reset-btn:hover {
      background-color: #b3d7ff;
    }

    .items-container {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
    }

    .item {
      display: flex;
      flex-direction: row;
      width: calc(33.33% - 20px);
      background-color: #fff;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }

    .item-details {
      flex: 1;
      margin-right: 10px;
    }

    .item img {
      width: 180px;
      height: auto;
    }

    .attribute-range {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      align-items: center;
    }

    hr.group-divider {
      width: 100%;
      border: 1px solid #bbb;
      margin: 30px 0;
    }
  </style>
</head>
<body>

  <h2>è¥¿é¾œå•†åŸ ğŸ‰ğŸ¢</h2>

  <p>
    Discord: jun_.0605 |
    FB: Weijun |
    Instagram: wei_.0605_ |
    Artale: Linå‡œ#5YfsH
  </p>

  <div class="controls">
    <input type="text" id="searchInput" placeholder="æœå°‹å•†å“..." onkeyup="applyFilters()">
    <button class="reset-btn" onclick="resetFilters()">é‡ç½®ç¯©é¸</button>

    <button onclick="filterCategory('å…¨éƒ¨')">å…¨éƒ¨</button>
    <button onclick="filterCategory('é‹å­')">é‹å­</button>

    <button onclick="toggleSort('meso')">æ¥“å¹£ <span id="mesoArrow">â¬†ï¸</span></button>
    <button onclick="toggleSort('snow')">é›ªæ•¸ <span id="snowArrow">â¬†ï¸</span></button>

    <label><input type="checkbox" class="attributeCheckbox" value="ç§»å‹•é€Ÿåº¦" onchange="applyFilters()"> ç§»å‹•é€Ÿåº¦</label>
    <label><input type="checkbox" class="attributeCheckbox" value="æ™ºåŠ›" onchange="applyFilters()"> æ™ºåŠ›</label>
    <label><input type="checkbox" class="attributeCheckbox" value="é­”æ”»" onchange="applyFilters()"> é­”æ”»</label>
    <label><input type="checkbox" class="attributeCheckbox" value="å¹¸é‹" onchange="applyFilters()"> å¹¸é‹</label>

    <div class="attribute-range">
      ç§»é€Ÿç¯„åœ: <input type="number" id="speedMin" placeholder="æœ€å°å€¼" onchange="applyFilters()">
      æ™ºåŠ›: <input type="number" id="intMin" placeholder="â‰¥" onchange="applyFilters()">
      é­”æ”»: <input type="number" id="matkMin" placeholder="â‰¥" onchange="applyFilters()">
      å¹¸é‹: <input type="number" id="lukMin" placeholder="â‰¥" onchange="applyFilters()">
    </div>
  </div>

  <div id="items" class="items-container"></div>

  <script>
    const items = [
      {
        name: "è—é›ªé‹",
        attributes: { "ç§»å‹•é€Ÿåº¦": 12 },
        scrolls: 0,
        quantity: 2,
        snow: 15,
        meso: 900,
        category: "é‹å­",
        image: "12é€Ÿè—é›ªé‹.png"
      },
      {
        name: "è—é›ªé‹",
        attributes: { "ç§»å‹•é€Ÿåº¦": 10 },
        scrolls: 0,
        quantity: 3,
        snow: 3,
        meso: 180,
        category: "é‹å­",
        image: "10é€Ÿè—é›ªé‹.png"
      },
      {
        name: "ç´…è‰²è‰¾å€«é‹",
        attributes: { "é­”æ”»": 1, "ç§»å‹•é€Ÿåº¦": 8, "æ™ºåŠ›": 4, "å¹¸é‹": 2 },
        scrolls: 0,
        quantity: 1,
        snow: 5,
        meso: 300,
        category: "é‹å­",
        image: "8é€Ÿ7å±¬è‰¾å€«é‹.png"
      }
    ];

    let currentCategory = "å…¨éƒ¨";
    let currentSort = "";
    let sortOrder = { meso: 'asc', snow: 'asc' };

    function renderItems(filteredItems) {
      const container = document.getElementById("items");
      container.innerHTML = "";

      filteredItems.forEach((item, index) => {
        if (index % 3 === 0 && index !== 0) {
          container.innerHTML += '<hr class="group-divider">';
        }

        const attrText = Object.entries(item.attributes)
          .map(([k, v]) => `${k}+${v}`)
          .join(" ");

        container.innerHTML += `
          <div class="item">
            <div class="item-details">
              <h4>å•†å“å: <strong>${item.name}</strong></h4>
              <p><span style="color:#ad0003;">å±¬æ€§:</span></p>
              <p>${attrText}</p>
              <p><span style="color:#ad0003;">å‰©é¤˜å·è»¸æ•¸:</span> ${item.scrolls}</p>
              <p><span style="color:#ad0003;">å•†å“é‡:</span> ${item.quantity}</p>
              <p><span style="color:#ad0003;">å”®åƒ¹:</span> ${item.snow}é›ª / ${item.meso}è¬æ¥“å¹£</p>
            </div>
            <img src="${item.image}" alt="${item.name}">
          </div>
        `;
      });
    }

    function applyFilters() {
      let result = items.filter(item => {
        const keyword = document.getElementById('searchInput').value.toLowerCase();
        if (keyword && !item.name.toLowerCase().includes(keyword)) return false;

        if (currentCategory !== "å…¨éƒ¨" && item.category !== currentCategory) return false;

        const checked = [...document.querySelectorAll('.attributeCheckbox:checked')].map(cb => cb.value);
        if (checked.length && !checked.every(attr => attr in item.attributes)) return false;

        const speedMin = parseInt(document.getElementById('speedMin').value);
        const intMin = parseInt(document.getElementById('intMin').value);
        const matkMin = parseInt(document.getElementById('matkMin').value);
        const lukMin = parseInt(document.getElementById('lukMin').value);

        if (!isNaN(speedMin) && (item.attributes["ç§»å‹•é€Ÿåº¦"] || 0) < speedMin) return false;
        if (!isNaN(intMin) && (item.attributes["æ™ºåŠ›"] || 0) < intMin) return false;
        if (!isNaN(matkMin) && (item.attributes["é­”æ”»"] || 0) < matkMin) return false;
        if (!isNaN(lukMin) && (item.attributes["å¹¸é‹"] || 0) < lukMin) return false;

        return true;
      });

      if (currentSort) {
        result.sort((a, b) => {
          const valA = a[currentSort];
          const valB = b[currentSort];
          return sortOrder[currentSort] === 'asc' ? valA - valB : valB - valA;
        });
        document.getElementById(currentSort + "Arrow").textContent = sortOrder[currentSort] === 'asc' ? 'â¬†ï¸' : 'â¬‡ï¸';
      }

      renderItems(result);
    }

    function filterCategory(cat) {
      currentCategory = cat;
      applyFilters();
    }

    function toggleSort(type) {
      currentSort = type;
      sortOrder[type] = sortOrder[type] === 'asc' ? 'desc' : 'asc';
      applyFilters();
    }

    function resetFilters() {
      document.getElementById('searchInput').value = '';
      currentCategory = "å…¨éƒ¨";
      document.querySelectorAll('.attributeCheckbox').forEach(cb => cb.checked = false);
      document.getElementById('speedMin').value = '';
      document.getElementById('intMin').value = '';
      document.getElementById('matkMin').value = '';
      document.getElementById('lukMin').value = '';
      applyFilters();
    }

    applyFilters();
  </script>
</body>
</html>
