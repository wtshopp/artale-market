<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>西龜商城 🍉🐢</title>
  <link rel="icon" href="favicon.png" type="image/png">
  <style>
    body {
      background-color: #d0d0d0;
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    .product-list {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: flex-start;
    }

    .product {
      width: calc(50% - 10px);
      background-color: #aaa;
      display: flex;
      padding: 10px;
      border-radius: 8px;
      min-height: 160px;
      align-items: center;
      box-sizing: border-box;
      position: relative;
    }

    .product img {
      width: 140px;
      height: 140px;
      object-fit: cover;
      margin-left: auto;
      margin-right: 20px;
      border-radius: 8px;
    }

    .product-img.long-img {
      width: auto;
      height: auto;
      max-width: 250px;
      max-height: 250px;
      object-fit: contain;
    }

    .sold {
      background-color: #ccc !important;
      opacity: 0.6;
      border: 2px dashed red;
      position: relative;
    }

    .sold-label {
      position: absolute;
      top: 5px;
      right: 5px;
      background-color: red;
      color: white;
      padding: 2px 6px;
      font-size: 12px;
      border-radius: 4px;
      font-weight: bold;
      pointer-events: none;
    }

    .status-select {
      position: absolute;
      bottom: 10px;
      right: 10px;
      display: none;
      padding: 4px 8px;
      border-radius: 5px;
      border: 1px solid #aaa;
      font-size: 14px;
      background-color: white;
      z-index: 1;
    }

    #admin-login-button {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 9999;
      padding: 8px 12px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #admin-login-button:hover {
      background-color: #0056b3;
    }
    .controls {
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  gap: 10px;
  overflow-x: auto;
  max-width: 100%;
  margin-bottom: 20px;
}

.controls input,
.controls select,
.controls button,
.controls summary {
  padding: 5px 10px;
  border-radius: 5px;
  border: 1px solid #aaa;
  background-color: #eeeeee;
  font-size: 14px;
  white-space: nowrap;
}

.controls button:hover {
  cursor: pointer;
}

.reset-button {
  background-color: #ffdddd;
}

.controls details {
  white-space: nowrap;
  flex-shrink: 0;
}

details[open] summary {
  background-color: #e0e0e0;
}

  </style>
</head>
<body>

  <h2>西龜商城 🍉🐢</h2>

  <div class="contact">

    <h4>這裡是我出售的商品 如有需要，請聯繫:</h4>

    <p>

      Discord: jun_.0605 |

      Artale: Lin凜#5YfsH | FB: Weijun | Instagram: wei_.0605_

    </p>

  </div>

  <div class="controls">

    <input type="text" id="searchInput" placeholder="搜尋商品">

    <button class="reset-button" onclick="resetFilters()">重置所有篩選</button>

    <select id="categorySelect">

      <option value="all">所有分類</option>
      
      <option value="卷軸&消耗品">卷軸&消耗品</option>

      <option value="頭盔">頭盔</option>

      <option value="手套">手套</option>

      <option value="鞋子">鞋子</option>

      <option value="盾牌">盾牌</option>

      <option value="耳環">耳環</option>

      <option value="披風">披風</option>

      <option value="武器">武器</option>

      <option value="上衣">上衣</option>

      <option value="下衣">下衣</option>

      <option value="套服">套服</option>

      <option value="特殊部位飾品">特殊部位飾品</option>

    </select>

  <select id="jobSelect">

    <option value="all">所有職業</option>

    <option value="通用">通用</option>

    <option value="劍士">劍士</option>

    <option value="法師">法師</option>

    <option value="弓箭手">弓箭手</option>

    <option value="盜賊">盜賊</option>

    <option value="海盜">海盜</option>

   </select>

    <button id="priceSort">楓幣 ⬆</button>

    <button id="snowSort">雪⬆</button>

    <details>

      <summary>進階篩選</summary>

      <div style="margin-top: 10px;">

        <div class="advanced-grid">
          <label>力量<input type="number" id="strMin" placeholder="最小" style="width: 60px;"> ~ <input type="number" id="strMax" placeholder="最大" style="width: 60px;"></label>
          <label>敏捷<input type="number" id="dexMin" placeholder="最小" style="width: 60px;"> ~ <input type="number" id="dexMax" placeholder="最大" style="width: 60px;"></label>
          <label>智力<input type="number" id="intMin" placeholder="最小" style="width: 60px;"> ~ <input type="number" id="intMax" placeholder="最大" style="width: 60px;"></label>
          <label>幸運<input type="number" id="lukMin" placeholder="最小" style="width: 60px;"> ~ <input type="number" id="lukMax" placeholder="最大" style="width: 60px;"></label>
          <label>物攻<input type="number" id="atkMin" placeholder="最小" style="width: 60px;"> ~ <input type="number" id="atkMax" placeholder="最大" style="width: 60px;"></label>
          <label>魔攻<input type="number" id="matkMin" placeholder="最小" style="width: 60px;"> ~ <input type="number" id="matkMax" placeholder="最大" style="width: 60px;"></label>
          <label>Hp<input type="number" id="hpMin" placeholder="最小" style="width: 60px;"> ~ <input type="number" id="hpMax" placeholder="最大" style="width: 60px;"></label>
          <label>Mp<input type="number" id="mpMin" placeholder="最小" style="width: 60px;"> ~ <input type="number" id="mpMax" placeholder="最大" style="width: 60px;"></label>
          <div class="break-row"></div>
          <label>命中<input type="number" id="accMin" placeholder="最小" style="width: 60px;"> ~ <input type="number" id="accMax" placeholder="最大" style="width: 60px;"></label>
          <label>跳躍<input type="number" id="jumpMin" placeholder="最小" style="width: 60px;"> ~ <input type="number" id="jumpMax" placeholder="最大" style="width: 60px;"></label>
          <label>迴避<input type="number" id="avoidMin" placeholder="最小" style="width: 60px;"> ~ <input type="number" id="avoidMax" placeholder="最大" style="width: 60px;"></label>
          <label>移動速度<input type="number" id="spdMin" placeholder="最小" style="width: 60px;"> ~ <input type="number" id="spdMax" placeholder="最大" style="width: 60px;"></label>
        </div>
      </div> 
    </details>
</div> 
    <div id="admin-control-panel" style="display:none; position: fixed; top: 100px; right: 10px; background: #f0f0f0; border: 1px solid #ccc; padding: 10px;">
  <label>選擇商品 ID（可複選）：</label><br>
  <select id="product-id-select" multiple size="5" style="width: 100%;">
    <!-- 動態插入 -->
  </select><br><br>
  
  <label>設定狀態：</label><br>
  <select id="status-select">
    <option value="上架中">上架中</option>
    <option value="已售出">已售出</option>
  </select><br><br>
  
  <button onclick="updateStatus()">確認變更</button>
    </div>


<!-- 管理員操作區（預設隱藏） -->
<div id="admin-control" style="display:none; margin:20px 0; background:#fff; padding:10px; border-radius:8px; box-shadow: 0 0 8px rgba(0,0,0,0.15);">
  <label for="admin-product-select">選擇商品（可多選）:</label><br>
  <select id="admin-product-select" multiple size="10" style="width: 100%; max-width: 500px;"></select>
  <br><br>
  <button id="mark-sold-button">標記為已售出</button>
  <button id="mark-available-button">標記為可販售</button>
</div>

  </div>

  <div id="admin-login-container" style="position: fixed; top: 10px; right: 10px;">
  <button id="admin-login-btn">管理員登入</button>
  </div>

  <div class="product-list" id="productList">

       <div class="product" data-name="藍月耳環" data-job="法師" data-type="耳環" data-price="12000000" data-snow="20" data-int="4" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="8" data-hp="0" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">
        <div class="info">
        <p><span class="label-name">商品名:</span> <span class="value">藍月耳環</span></p>
        <p><span class="label">屬性:</span></p>
        <p><span class="value">智力+4 魔攻+8</span></p>
        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>
        <p><span class="label">商品量:</span> <span class="value">1</span></p>
        <p><span class="label">售價:</span> <span class="value">20雪 / 1200萬楓幣</span></p>
      </div>
      <img src="12ap藍月耳環(1).png" alt="12ap藍月耳環(1)">
    </div>
    
     <div class="product" data-name="聖十字耳環" data-job="法師" data-type="耳環" data-price="12000000" data-snow="20" data-int="4" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="8" data-hp="0" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">
      <div class="info">
        <p><span class="label-name">商品名:</span> <span class="value">聖十字耳環</span></p>
        <p><span class="label">屬性:</span></p>
        <p><span class="value">智力+4 魔攻+8</span></p>
        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>
        <p><span class="label">商品量:</span> <span class="value">1</span></p>
        <p><span class="label">售價:</span> <span class="value">20雪 / 1200萬楓幣</span></p>
      </div>
      <img src="12ap聖十字耳環(1).png" alt="12ap聖十字耳環(1)">
    </div>

      <div class="product" data-name="藍雪鞋" data-job="法師" data-type="鞋子" data-price="9000000" data-snow="15" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="0" data-mp="0" data-jump="0" data-avoid="0" data-spd="12" data-acc="0">
      <div class="info">
        <p><span class="label-name">商品名:</span> <span class="value">藍雪鞋</span></p>
        <p><span class="label">屬性:</span></p>
        <p><span class="value">移動速度+12</span></p>
        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>
        <p><span class="label">商品量:</span> <span class="value">2</span></p>
        <p><span class="label">售價:</span> <span class="value">15雪 / 900萬楓幣</span></p>
      </div>     
      <img src="12速藍雪鞋.png" alt="藍雪鞋(+6)">
    </div>


    <div class="product" data-name="藍雪鞋" data-job="法師" data-type="鞋子" data-price="1800000" data-snow="3" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="0" data-mp="0" data-jump="0" data-avoid="0" data-spd="10" data-acc="0">

      <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">藍雪鞋</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">移動速度+10</span></p>

        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>

        <p><span class="label">商品量:</span> <span class="value">1</span></p>

        <p><span class="label">售價:</span> <span class="value">3雪 / 180萬楓幣</span></p>

      </div>
      <img src="10速藍雪鞋.png" alt="藍雪鞋(+5)">
    </div>



    <div class="product" data-name="紅色艾倫鞋" data-job="法師" data-type="鞋子" data-price="3000000" data-snow="5" data-int="4" data-luk="2" data-str="0" data-dex="0" data-atk="0" data-matk="1" data-hp="0" data-mp="0" data-jump="0" data-avoid="0" data-spd="8" data-acc="0">
      <div class="info">
        <p><span class="label-name">商品名:</span> <span class="value">紅色艾倫鞋</span></p>
        <p><span class="label">屬性:</span></p>
        <p><span class="value">智力+4 幸運+2</span></p>
        <p><span class="value">魔攻+1 移動速度+8</span></p>
        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>
        <p><span class="label">商品量:</span> <span class="value">1</span></p>
        <p><span class="label">售價:</span> <span class="value">5雪 / 300萬楓幣</span></p>
      </div>
      <img src="8速7屬艾倫鞋.png" alt="紅色艾倫鞋(+4)">
    </div>

    

      <div class="product" data-name="銀龍槍" data-job="劍士" data-type="武器" data-price="6000000" data-snow="10" data-int="0" data-luk="0" data-str="0" data-dex="10" data-atk="93" data-matk="0" data-hp="0" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="19">

      <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">銀龍槍</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">敏捷+10 物攻+93</span></p>

        <p><span class="value">命中+19</span></p>

        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>

        <p><span class="label">商品量:</span> <span class="value">1</span></p>

        <p><span class="label">售價:</span> <span class="value">10雪 / 600萬楓幣</span></p>

      </div>
      <img src="19命中+5銀龍槍.png" alt="銀龍槍(+5)">
    </div>

    <div class="product" data-name="彩色游泳圈" data-job="通用" data-type="武器" data-price="300000" data-snow="0.5" data-int="0" data-luk="0" data-str="2" data-dex="0" data-atk="89" data-matk="0" data-hp="0" data-mp="0" data-jump="10" data-avoid="0" data-spd="0" data-acc="0">
      <div class="info">
        <p><span class="label-name">商品名:</span> <span class="value">彩色游泳圈</span></p>
        <p><span class="label">屬性:</span></p>
        <p><span class="value">力量+2</span></p>
        <p><span class="value">物攻+89 跳躍+10</span></p>
        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>
        <p><span class="label">商品量:</span> <span class="value">1</span></p>
        <p><span class="label">售價:</span> <span class="value">0.5雪 / 30萬楓幣</span></p>
      </div>     
      <img src="彩色游泳圈(+2).png" alt="彩色游泳圈(+2)">
    </div>

        <div class="product" data-name="彩色游泳圈" data-job="通用" data-type="武器" data-price="6000000" data-snow="10" data-int="0" data-luk="0" data-str="5" data-dex="0" data-atk="95" data-matk="0" data-hp="0" data-mp="0" data-jump="10" data-avoid="0" data-spd="0" data-acc="0">
      <div class="info">
        <p><span class="label-name">商品名:</span> <span class="value">彩色游泳圈</span></p>
        <p><span class="label">屬性:</span></p>
        <p><span class="value">力量+5</span></p>
        <p><span class="value">物攻+95 跳躍+10</span></p>
        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>
        <p><span class="label">商品量:</span> <span class="value">1</span></p>
        <p><span class="label">售價:</span> <span class="value">10雪 / 600萬楓幣</span></p>
      </div>     
      <img src="彩色游泳圈(+5).png" alt="彩色游泳圈(+5)">
    </div>

            <div class="product" data-name="藍色條紋游泳圈" data-job="通用" data-type="武器" data-price="3000000" data-snow="5" data-int="0" data-luk="0" data-str="6" data-dex="0" data-atk="27" data-matk="0" data-hp="0" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">
      <div class="info">
        <p><span class="label-name">商品名:</span> <span class="value">藍色條紋游泳圈</span></p>
        <p><span class="label">屬性:</span></p>
        <p><span class="value">力量+6 物攻+27</span></p>
        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>
        <p><span class="label">商品量:</span> <span class="value">1</span></p>
        <p><span class="label">售價:</span> <span class="value">5雪 / 300萬楓幣</span></p>
      </div>     
      <img src="藍色條紋游泳圈(+6).png" alt="藍色條紋游泳圈(+6)">
    </div>

<div class="product" data-name="救生圈" data-job="通用" data-type="武器" data-price="3000000" data-snow="5" data-int="0" data-luk="0" data-str="4" data-dex="0" data-atk="83" data-matk="0" data-hp="150" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">
      <div class="info">
        <p><span class="label-name">商品名:</span> <span class="value">救生圈</span></p>
        <p><span class="label">屬性:</span></p>
        <p><span class="value">力量+4</span></p>
        <p><span class="value">物攻+83 Hp+150</span></p>
        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>
        <p><span class="label">商品量:</span> <span class="value">3</span></p>
        <p><span class="label">售價:</span> <span class="value">5雪 / 300萬楓幣</span></p>
      </div>     
      <img src="救生圈(+4).png" alt="救生圈(+4)">
    </div>
    

        <div class="product" data-name="霸王劍" data-job="劍士" data-type="武器" data-price="4200000" data-snow="7" data-int="0" data-luk="0" data-str="5" data-dex="0" data-atk="95" data-matk="0" data-hp="0" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">

        <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">霸王劍</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">力量+5 物攻+95</span></p>

        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>

        <p><span class="label">商品量:</span> <span class="value">1</span></p>

        <p><span class="label">售價:</span> <span class="value">7雪 / 420萬楓幣</span></p>

      </div>   

      <img src="95ad+5霸王劍.png" alt="霸王劍(+5)">

    </div>

    

    <div class="product" data-name="紅色艾姆普里斯戰甲" data-job="劍士" data-type="套服" data-price="4200000" data-snow="7" data-int="0" data-luk="0" data-str="5" data-dex="15" data-atk="0" data-matk="0" data-hp="0" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="9">

      <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">紅色艾姆普里斯戰甲</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">力量+5 敏捷+15</span></p>

        <p><span class="value">命中+9</span></p>

        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>

        <p><span class="label">商品量:</span> <span class="value">1</span></p>

        <p><span class="label">售價:</span> <span class="value">7雪 / 420萬楓幣</span></p>

      </div>

      <img src="劍士29屬套服(紅).png" alt="29屬套服(lv.80/紅/+6)">

    </div>



    <div class="product" data-name="粉紅優雅緊身裙" data-job="法師" data-type="下衣" data-price="3000000" data-snow="5" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="65" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">

        <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">粉紅優雅緊身裙</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">Hp+65</span></p>

        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>

        <p><span class="label">商品量:</span> <span class="value">1</span></p>

        <p><span class="label">售價:</span> <span class="value">5雪 / 300萬楓幣</span></p>

      </div>   

      <img src="65hp下衣(1).png" alt="65hp下衣(1)">

    </div>



    <div class="product" data-name="粉紅優雅緊身裙" data-job="法師" data-type="下衣" data-price="45000000" data-snow="75" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="110" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">

        <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">粉紅優雅緊身裙</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">Hp+110</span></p>

        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>

        <p><span class="label">商品量:</span> <span class="value">1</span></p>

        <p><span class="label">售價:</span> <span class="value">75雪 / 4500萬楓幣</span></p>

      </div>   

      <img src="下衣(1)110hp.png" alt="下衣(1)110hp">

    </div>

    

    <div class="product" data-name="粉紅優雅緊身衣" data-job="法師" data-type="上衣" data-price="18000000" data-snow="30" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="100" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">

        <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">粉紅優雅緊身衣</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">Hp+100</span></p>

        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>

        <p><span class="label">商品量:</span> <span class="value">1</span></p>

        <p><span class="label">售價:</span> <span class="value">30雪 / 1800萬楓幣</span></p>

      </div>   

      <img src="100hp上衣(1).png" alt="100hp上衣(1)">

    </div>



    <div class="product" data-name="方形木盾" data-job="通用" data-type="盾牌" data-price="18000000" data-snow="30" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="105" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">

        <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">方形木盾</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">Hp+105</span></p>

        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>

        <p><span class="label">商品量:</span> <span class="value">1</span></p>

        <p><span class="label">售價:</span> <span class="value">30雪 / 1800萬楓幣</span></p>

      </div>   

      <img src="105hp木盾(1).png" alt="105hp木盾(1)">

    </div>



    <div class="product" data-name="黑色魔法披風" data-job="通用" data-type="披風" data-price="9000000" data-snow="15" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="50" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">

        <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">黑色魔法披風</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">Hp+50</span></p>

        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>

        <p><span class="label">商品量:</span> <span class="value">1</span></p>

        <p><span class="label">售價:</span> <span class="value">15雪 / 900萬楓幣</span></p>

      </div>   

      <img src="50hp黑色魔法披風(1).png" alt="50hp黑色魔法披風(1)">

    </div>



    <div class="product" data-name="紫水晶耳環" data-job="通用" data-type="耳環" data-price="6000000" data-snow="10" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="60" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">
        <div class="info">
        <p><span class="label-name">商品名:</span> <span class="value">紫水晶耳環</span></p>
        <p><span class="label">屬性:</span></p>
        <p><span class="value">Hp+60</span></p>
        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>
        <p><span class="label">商品量:</span> <span class="value">1</span></p>
        <p><span class="label">售價:</span> <span class="value">10雪 / 600萬楓幣</span></p>
      </div>   
      <img src="60hp紫水晶耳環(1).png" alt="60hp紫水晶耳環(1)">
    </div>

    <div class="product" data-name="鑽石護盾" data-job="法師" data-type="盾牌" data-price="15000000" data-snow="25" data-int="1" data-luk="8" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="60" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">
        <div class="info">
        <p><span class="label-name">商品名:</span> <span class="value">鑽石護盾</span></p>
        <p><span class="label">屬性:</span></p>
        <p><span class="value">智力+1 幸運+8</span></p>
        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>
        <p><span class="label">商品量:</span> <span class="value">1</span></p>
        <p><span class="label">售價:</span> <span class="value">25雪 / 1500萬楓幣</span></p>
      </div>   
      <img src="1智8幸鑽盾(1).png" alt="1智8幸鑽盾(1)">
    </div>

    <div class="product" data-name="神秘護盾" data-job="法師" data-type="盾牌" data-price="15000000" data-snow="25" data-int="2" data-luk="6" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="60" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">
        <div class="info">
        <p><span class="label-name">商品名:</span> <span class="value">神秘護盾</span></p>
        <p><span class="label">屬性:</span></p>
        <p><span class="value">智力+2 幸運+6</span></p>
        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>
        <p><span class="label">商品量:</span> <span class="value">1</span></p>
        <p><span class="label">售價:</span> <span class="value">25雪 / 1500萬楓幣</span></p>
      </div>   
      <img src="2智6幸神秘護盾(1).png" alt="2智6幸神秘護盾(1)">
    </div>

    <div class="product" data-name="紅色鞭子" data-job="通用" data-type="武器" data-price="600000" data-snow="1" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="48" data-matk="0" data-hp="60" data-mp="0" data-jump="0" data-avoid="0" data-spd="15" data-acc="0">
        <div class="info">
        <p><span class="label-name">商品名:</span> <span class="value">紅色鞭子</span></p>
        <p><span class="label">屬性:</span></p>
        <p><span class="value">物攻+48</span></p>
        <p><span class="value">移動速度+15</span></p>
        <p><span class="label">剩餘卷軸數:</span> <span class="value">7</span></p>
        <p><span class="label">商品量:</span> <span class="value">1</span></p>
        <p><span class="label">售價:</span> <span class="value">1雪 / 60萬楓幣</span></p>
      </div>   
      <img src="15速紅鞭(1).png" alt="15速紅鞭(1)">
    </div>

    <div class="product" data-name="愛心耳環" data-job="通用" data-type="耳環" data-price="15000000" data-snow="25" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="75" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">

        <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">愛心耳環</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">Hp+75</span></p>

        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>

        <p><span class="label">商品量:</span> <span class="value">1</span></p>

        <p><span class="label">售價:</span> <span class="value">25雪 / 1500萬楓幣</span></p>

      </div>   

      <img src="75hp愛心耳環(1).png" alt="75hp愛心耳環(1)">

    </div>



    <div class="product" data-name="工地手套" data-job="通用" data-type="手套" data-price="9000000" data-snow="15" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="75" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">

        <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">工地手套</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">Hp+75</span></p>

        <p><span class="label">剩餘卷軸數:</span> <span class="value">0</span></p>

        <p><span class="label">商品量:</span> <span class="value">1</span></p>

        <p><span class="label">售價:</span> <span class="value">15雪 / 900萬楓幣</span></p>
      </div>   
      <img src="工地手套75hp.png" alt="工地手套75hp">
    </div>

        <div class="product" data-name="披風敏捷性卷軸60%" data-job="通用" data-type="卷軸&消耗品" data-price="6000000" data-snow="10" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="0" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">

        <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">披風敏捷性卷軸60%</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">敏捷+2 成功率60%</span></p>

        <p><span class="label">商品量:</span> <span class="value">5</span></p>

        <p><span class="label">售價:</span> <span class="value">10雪 / 600萬楓幣</span></p>
      </div>   
      <img src="披風敏捷性卷軸60.png" class="product-img long-img" alt="披風敏捷性卷軸60%">
    </div>

       <div class="product" data-name="手槍攻擊力卷軸60%" data-job="通用" data-type="卷軸&消耗品" data-price="1200000" data-snow="2" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="0" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">

        <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">手槍攻擊力卷軸60%</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">物攻+2 命中+1</span></p>

        <p><span class="value">成功率60%</span></p>

        <p><span class="label">商品量:</span> <span class="value">2</span></p>

        <p><span class="label">售價:</span> <span class="value">2雪 / 120萬楓幣</span></p>
      </div>   
      <img src="手槍攻擊力卷軸60.png" class="product-img long-img" alt="手槍攻擊力卷軸60%">
    </div>

          <div class="product" data-name="短劍攻擊力卷軸10%" data-job="通用" data-type="卷軸&消耗品" data-price="1200000" data-snow="2" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="0" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">

        <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">短劍攻擊力卷軸10%</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">物攻+5 幸運+3</span></p>

        <p><span class="value">物防+1 成功率10%</span></p>

        <p><span class="label">商品量:</span> <span class="value">1</span></p>

        <p><span class="label">售價:</span> <span class="value">2雪 / 120萬楓幣</span></p>
      </div>   
      <img src="短劍攻擊力卷軸10.png" class="product-img long-img" alt="短劍攻擊力卷軸10%">
    </div>

              <div class="product" data-name="弓攻擊力卷軸10%" data-job="通用" data-type="卷軸&消耗品" data-price="1800000" data-snow="3" data-int="0" data-luk="0" data-str="0" data-dex="0" data-atk="0" data-matk="0" data-hp="0" data-mp="0" data-jump="0" data-avoid="0" data-spd="0" data-acc="0">

        <div class="info">

        <p><span class="label-name">商品名:</span> <span class="value">弓攻擊力卷軸10%</span></p>

        <p><span class="label">屬性:</span></p>

        <p><span class="value">物攻+5 命中+3</span></p>

        <p><span class="value">敏捷+1 成功率10%</span></p>

        <p><span class="label">商品量:</span> <span class="value">1</span></p>

        <p><span class="label">售價:</span> <span class="value">3雪 / 180萬楓幣</span></p>
      </div>   
      <img src="弓攻擊力卷軸10.png" class="product-img long-img" alt="弓攻擊力卷軸10%">
    </div>

    

  </div>

  <p id="noResults" style="display: none; margin-top: 20px; font-weight: bold; color: #a89f74;">

    沒有符合條件的商品

  </p>

<script>
let isAdmin = localStorage.getItem("isAdmin") === "true";
let productList;
let originalHTML;
const originalProducts = [];
let currentSort = null;

// === [ 商品狀態顯示（紅框 + 標籤） ] ===
function updateProductStatusVisual(product, status) {
  const existingLabel = product.querySelector(".sold-label");

  if (status === "sold-out") {
    product.classList.add("sold");
    product.style.border = "2px dashed red";

    if (!existingLabel) {
      const label = document.createElement("div");
      label.className = "sold-label";
      label.textContent = "已售出";
      Object.assign(label.style, {
        color: "red",
        position: "absolute",
        top: "5px",
        right: "5px",
        backgroundColor: "rgba(255,255,255,0.8)",
        padding: "2px 6px",
        borderRadius: "3px"
      });
      product.appendChild(label);
    }
  } else {
    product.classList.remove("sold");
    product.style.border = "";
    if (existingLabel) existingLabel.remove();
  }
}

// ✅ 使用你指定的版本
function initProductStatusControls() {
  originalProducts.forEach(product => {
    const savedStatus = localStorage.getItem("product-status-" + product.id) || "on-sale";
    updateProductStatusVisual(product, savedStatus);

    let select = product.querySelector(".status-select");
    if (!select) {
      select = document.createElement("select");
      select.className = "status-select";
      product.appendChild(select);
    }

    select.innerHTML = "";
    const option1 = new Option("上架中", "on-sale");
    const option2 = new Option("已售出", "sold-out");
    select.append(option1, option2);
    select.value = savedStatus;

    select.addEventListener("change", e => {
      const status = e.target.value;
      localStorage.setItem("product-status-" + product.id, status);
      updateProductStatusVisual(product, status);
    });

    select.style.display = isAdmin ? "inline-block" : "none";

    product.style.position = "relative";
    Object.assign(select.style, {
      position: "absolute",
      bottom: "10px",
      right: "10px"
    });
  });
}

function getValue(id, fallback) {
  const val = document.getElementById(id)?.value;
  return val === "" ? fallback : parseInt(val);
}

function getFilteredProducts() {
  const temp = document.createElement("div");
  temp.innerHTML = originalHTML;
  return Array.from(temp.querySelectorAll(".product"));
}

function applyCurrentSort(products) {
  if (!currentSort) return products;
  const { type, ascending } = currentSort;
  return products.sort((a, b) => {
    const aVal = +a.getAttribute("data-" + type);
    const bVal = +b.getAttribute("data-" + type);
    return ascending ? aVal - bVal : bVal - aVal;
  });
}

function filterProducts() {
  const searchInput = document.getElementById("searchInput").value.toLowerCase();
  const category = document.getElementById("categorySelect").value;
  const job = document.getElementById("jobSelect").value;

  const filters = {};
  ["str", "dex", "int", "luk", "atk", "matk", "hp", "mp", "jump", "avoid", "spd", "acc"].forEach(attr => {
    filters[attr + "Min"] = getValue(attr + "Min", -Infinity);
    filters[attr + "Max"] = getValue(attr + "Max", Infinity);
  });

  const products = getFilteredProducts();
  const filtered = products.filter(product => {
    const prodJob = product.getAttribute("data-job") || "";
    const name = (product.getAttribute("data-name") || "").toLowerCase();
    const type = product.getAttribute("data-type") || "";
    return (
      name.includes(searchInput) &&
      (category === "all" || type === category) &&
      (job === "all" || prodJob === job) &&
      Object.keys(filters).every(key => {
        const attr = key.replace(/Min|Max/, "");
        const val = +product.getAttribute("data-" + attr);
        return val >= filters[attr + "Min"] && val <= filters[attr + "Max"];
      })
    );
  });

  const sorted = applyCurrentSort(filtered);
  productList.innerHTML = "";
  sorted.forEach(p => productList.appendChild(p));

  const noResults = document.getElementById("noResults");
  if (noResults) noResults.style.display = sorted.length === 0 ? "block" : "none";

  initProductStatusControls(); // ✅ 重新套用紅框/標籤/選單
}

// 包裝 filterProducts，加上初始商品記錄與狀態控制
filterProducts = (function (originalFilter) {
  return function () {
    productList.innerHTML = originalHTML;
    originalProducts.length = 0;
    originalProducts.push(...document.querySelectorAll(".product"));
    originalFilter();
    initProductStatusControls();
  };
})(filterProducts);

function sortBy(type) {
  const ascending = !currentSort || currentSort.type !== type ? true : !currentSort.ascending;
  currentSort = { type, ascending };
  document.getElementById(type + "Sort").innerText = (type === "price" ? "楓幣 " : "雪 ") + (ascending ? "⬆" : "⬇");
  filterProducts();
}

function resetFilters() {
  document.getElementById("searchInput").value = "";
  document.getElementById("categorySelect").value = "all";
  document.getElementById("jobSelect").value = "all";
  document.querySelectorAll(".advanced-grid input").forEach(input => input.value = "");
  currentSort = null;
  document.getElementById("priceSort").innerText = "楓幣 ⬆";
  document.getElementById("snowSort").innerText = "雪 ⬆";
  filterProducts();
}

window.addEventListener("load", () => {
  productList = document.getElementById("productList");
  originalHTML = productList.innerHTML;
  originalProducts.length = 0;
  originalProducts.push(...document.querySelectorAll(".product"));

  // 管理員登入按鈕
  const adminBtn = document.createElement("button");
  adminBtn.id = "admin-login-button";
  adminBtn.textContent = isAdmin ? "管理員登出" : "管理員登入";
  Object.assign(adminBtn.style, {
    position: "fixed", top: "10px", right: "10px", zIndex: 9999,
    padding: "8px 12px", backgroundColor: "#007bff", color: "white",
    border: "none", borderRadius: "5px", cursor: "pointer"
  });

  adminBtn.addEventListener("click", () => {
    if (!isAdmin) {
      const pwd = prompt("請輸入管理員密碼：");
      if (pwd === "062205") {
        isAdmin = true;
        localStorage.setItem("isAdmin", "true");
        alert("登入成功！");
        adminBtn.textContent = "管理員登出";
      } else {
        return alert("密碼錯誤！");
      }
    } else {
      isAdmin = false;
      localStorage.setItem("isAdmin", "false");
      alert("已登出！");
      adminBtn.textContent = "管理員登入";
    }

    // ✅ 重新載入商品狀態與選單
    originalProducts.length = 0;
    originalProducts.push(...document.querySelectorAll(".product"));
    filterProducts();
  });

  document.body.appendChild(adminBtn);

  filterProducts(); // 初始化時顯示商品與狀態
});

document.getElementById("searchInput").addEventListener("input", filterProducts);
document.getElementById("categorySelect").addEventListener("change", filterProducts);
document.getElementById("jobSelect").addEventListener("change", filterProducts);
document.querySelectorAll(".advanced-grid input").forEach(i => i.addEventListener("input", filterProducts));
document.getElementById("priceSort").addEventListener("click", () => sortBy("price"));
document.getElementById("snowSort").addEventListener("click", () => sortBy("snow"));
</script>
</body>
</html>
